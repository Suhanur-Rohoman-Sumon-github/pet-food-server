// This is your Prisma schema file

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Role {
  ADMIN
  VENDOR
  USER
}

enum Status {
  inProgress
  Blocked
}

model User {
  id         String  @id @default(uuid())
  email      String  @unique
  password   String
  memberId   String  @unique
  status     Status  @default(inProgress) // Added default value
  isDeleted  Boolean @default(false)
  role       Role    @default(USER) // Added default value
  created_at DateTime @default(now())
  
}

model Admin {
  id          String  @id @default(uuid())
  name        String
  location    String
  email       String
  designation String
  contactNo   String
  created_at  DateTime @default(now())
  updated_at  DateTime @updatedAt
}

model Vendor {
  id          String  @id @default(uuid())
  name        String
  location    String
  email       String
  designation String
  contactNo   String
  shop        Shop?   // Removed the @relation attribute here
  created_at  DateTime @default(now())
  updated_at  DateTime @updatedAt
}

model Shop {
  id              String   @id @default(uuid())
  name            String
  location        String?   @default("") // Added default value for location
  cover_photo     String?   @default("") // Added default value for cover photo
  profile_picture String?   @default("") // Added default value for profile picture
  products        Product[]
  created_at      DateTime @default(now())
  updated_at      DateTime @updatedAt
  vendorId        String   @unique
  vendor          Vendor   @relation(fields: [vendorId], references: [id])
  ratings         Int      @default(0) // Added default value
  follower        Int      @default(0) // Added default value
}

model Category {
  id          String    @id @default(uuid())
  name        String
  products    Product[]
  created_at  DateTime @default(now())
  updated_at  DateTime @updatedAt
}

model Product {
  id             String   @id @default(uuid())
  shop_id        String   @default("") // Added default value
  name           String
  price          Float    @default(0.0) // Added default value
  category_id    String   @default("") // Added default value
  description    String?  @default("") // Added default value
  stock_quantity Int      @default(0)  // Added default value
  discount_price Float?   @default(0.0) // Added default value
  images         String[] @default([]) // Added default value for array
  created_at     DateTime @default(now())
 

  Shop           Shop     @relation(fields: [shop_id], references: [id])
  Category       Category @relation(fields: [category_id], references: [id])
}
